<!DOCTYPE html> 
<html lang="zh-CN" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ if .IsHome }}AKIHA FIELD - 典藏世间之美，共叙心动诗篇。{{ else }}{{ .Title }} - AKIHA FIELD{{ end }}</title>
  <meta name="description" content="AKIHA FIELD致力于创作和发行高质量的视觉小说游戏，将精美的画面、动人的故事和丰富的角色融为一体，为玩家带来沉浸式的游戏体验.">
  
  {{ $commonCSS := resources.Get "css/common.css" }}
  {{ $styleCSS := resources.Get "css/style.css" }}
  {{ $loadingCSS := resources.Get "css/loading.css" }}
  
  {{ if $commonCSS }}
    {{ $commonCSS = $commonCSS | fingerprint }}
    <link rel="stylesheet" href="{{ $commonCSS.Permalink }}">
  {{ else }}
    <!-- Fallback if CSS not found -->
    <link rel="stylesheet" href="{{ "css/common.css" | relURL }}">
  {{ end }}
  
  {{ if $styleCSS }}
    {{ $styleCSS = $styleCSS | fingerprint }}
    <link rel="stylesheet" href="{{ $styleCSS.Permalink }}">
  {{ else }}
    <link rel="stylesheet" href="{{ "css/style.css" | relURL }}">
  {{ end }}

  <!-- 加载动画 CSS -->
  {{ if $loadingCSS }}
    {{ $loadingCSS = $loadingCSS | minify | fingerprint }}
    <link rel="stylesheet" href="{{ $loadingCSS.Permalink }}">
  {{ else }}
    <link rel="stylesheet" href="{{ "css/loading.css" | relURL }}">
  {{ end }}
</head>
<body> 
  <!-- 加载动画 - 极致丝滑版本 -->
  <div id="loading">
    <div class="loader-container">
      <div class="loader"></div>
      <!-- 可选：添加加载文字 -->
      <div class="loading-text">Loading...</div>
    </div>
  </div>

  <!-- 顶部导航栏 -->
  <nav class="navbar">
    <div class="navbar-logo">
      <a class="logo" href="{{ "/" | relURL }}" aria-label="AKIHA FIELD 首页">
        <div class="logo-img">
          <img src="{{ "images/AKIHA FIELD logo.jpg" | relURL }}" alt="AKIHA FIELD" loading="lazy">
        </div>
        <div class="logo-text">
          <h1>AKIHA FIELD</h1>
          <p>典藏世间之美，共叙心动诗篇。</p>
        </div>
      </a>
    </div>  
    
    <ul class="navbar-menu">
      <li><a href="{{ "/" | relURL }}">首页</a></li>
      <li><a href="{{ "games/" | relURL }}">游戏库</a></li>
      <li><a href="{{ "products/companies/" | relURL }}">游戏会社</a></li>
      <li><a href="{{ "about/" | relURL }}">关于我们</a></li>
      <li><a href="{{ "contact/" | relURL }}">联系我们</a></li>
    </ul>
    
    <!-- 替换原来的主题切换按钮 -->
    <div class="navbar-controls">
      <!-- 新的主题切换器 -->
      <label for="theme" class="theme-toggle-new">
        <span class="theme__toggle-wrap">
          <input id="theme" class="theme__toggle" type="checkbox" role="switch" name="theme" value="dark">
          <span class="theme__fill"></span>
          <span class="theme__icon">
            <span class="theme__icon-part"></span>
            <span class="theme__icon-part"></span>
            <span class="theme__icon-part"></span>
            <span class="theme__icon-part"></span>
            <span class="theme__icon-part"></span>
            <span class="theme__icon-part"></span>
            <span class="theme__icon-part"></span>
            <span class="theme__icon-part"></span>
            <span class="theme__icon-part"></span>
          </span>
        </span>
      </label>
      
      <!-- 登录按钮保持不变 -->
      <div class="login-container">
        <a href="{{ "login/" | relURL }}" class="login-btn">
          <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" 
                  stroke="currentColor" stroke-width="2" fill="none"/>
          </svg>
          <span class="text">登录/注册</span>
        </a>
      </div>
    </div>
  </nav>

  <!-- 主内容区域 - 添加过渡类 -->
  <main class="main-content">
    {{ block "main" . }}{{ end }}
  </main>
  
  <!-- 底部导航栏 -->
  <footer>
    <div class="container">
      <div class="footer-links">
        <a href="{{ "user-agreement/" | relURL }}" class="footer-link" target="_blank">用户服务协议</a>
        <a href="{{ "privacy-policy/" | relURL }}" class="footer-link" target="_blank">隐私政策</a>
        <a href="{{ "fraud-prevention/" | relURL }}" class="footer-link" target="_blank">电信欺诈应对公告</a>
      </div>
      <p>© 2025 Akiha Field. 保留所有权利。</p>
      <button class="back-to-top" aria-label="返回顶部">
        <svg class="svgIcon" viewBox="0 0 384 512">
          <path
            d="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"
          ></path>
        </svg>
      </button>
    </div>
  </footer>

  {{ $mainJS := resources.Get "js/script.js" }}
  {{ if $mainJS }}
    {{ $mainJS = $mainJS | resources.Minify | fingerprint }}
    <script src="{{ $mainJS.Permalink }}"></script>
  {{ else }}
    <script src="{{ "js/script.js" | relURL }}"></script>
  {{ end }}

  <!-- 添加主题切换脚本 -->
  {{ $themeJS := resources.Get "js/theme-switcher.js" }}
  {{ if $themeJS }}
    {{ $themeJS = $themeJS | resources.Minify | fingerprint }}
    <script src="{{ $themeJS.Permalink }}"></script>
  {{ else }}
    <script src="{{ "js/theme-switcher.js" | relURL }}"></script>
  {{ end }}

  <!-- 添加加载动画脚本 - 极致丝滑版本 -->
  {{ $loadingJS := resources.Get "js/loading.js" }}
  {{ if $loadingJS }}
    {{ $loadingJS = $loadingJS | resources.Minify | fingerprint }}
    <script src="{{ $loadingJS.Permalink }}"></script>
  {{ else }}
    <script src="{{ "js/loading.js" | relURL }}"></script>
  {{ end }}
  
  {{ block "scripts" . }}{{ end }}
</body>
</html>